/**
 * Popover Component Styles
 * Design tokens: @hidearea-design/tokens
 *
 * This CSS file defines the complete visual styling for the Popover component.
 * Popover is an interactive floating panel with an arrow pointer.
 * All values reference design tokens (CSS custom properties).
 */

/* ========================================
   Host & Visibility
   ======================================== */

:host {
  display: inline-block;
  position: relative;
}

:host([open]) .popover-content {
  display: block;
}

/* ========================================
   Popover Content
   ======================================== */

.popover-content {
  display: none;
  position: absolute;
  background: var(--background-primary);
  border: 1px solid var(--border-default);
  border-radius: var(--border-radius-md, 6px);
  box-shadow: var(--shadow-lg);
  z-index: 1100;
  width: 320px;
  min-width: 200px;
  max-width: 90vw;
  max-height: 480px;
  animation: popoverEnter 150ms ease-out;
}

@keyframes popoverEnter {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Size Variants */
:host([size="sm"]) .popover-content,
:host([size="small"]) .popover-content {
  width: 240px;
}

:host([size="md"]) .popover-content,
:host([size="default"]) .popover-content {
  width: 320px;
}

:host([size="lg"]) .popover-content,
:host([size="large"]) .popover-content {
  width: 480px;
}

/* ========================================
   Arrow
   ======================================== */

.popover-arrow {
  position: absolute;
  width: var(--spacing-2, 8px);
  height: var(--spacing-2, 8px);
  background: var(--background-primary);
  border: 1px solid var(--border-default);
  transform: rotate(45deg);
}

/* Arrow positioning for different placements */
:host([placement="top"]) .popover-content {
  bottom: calc(100% + var(--spacing-2, 8px));
}

:host([placement="top"]) .popover-arrow {
  bottom: calc(var(--spacing-1, 4px) * -1);
  left: 50%;
  transform: translateX(-50%) rotate(45deg);
  border-top: none;
  border-left: none;
}

:host([placement="bottom"]) .popover-content {
  top: calc(100% + var(--spacing-2, 8px));
}

:host([placement="bottom"]) .popover-arrow {
  top: calc(var(--spacing-1, 4px) * -1);
  left: 50%;
  transform: translateX(-50%) rotate(45deg);
  border-bottom: none;
  border-right: none;
}

:host([placement="left"]) .popover-content {
  right: calc(100% + var(--spacing-2, 8px));
}

:host([placement="left"]) .popover-arrow {
  right: calc(var(--spacing-1, 4px) * -1);
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
  border-left: none;
  border-bottom: none;
}

:host([placement="right"]) .popover-content {
  left: calc(100% + var(--spacing-2, 8px));
}

:host([placement="right"]) .popover-arrow {
  left: calc(var(--spacing-1, 4px) * -1);
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
  border-right: none;
  border-top: none;
}

/* ========================================
   Popover Header
   ======================================== */

.popover-header {
  padding: var(--spacing-4, 16px);
  border-bottom: 1px solid var(--border-default);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.popover-title {
  font-size: var(--font-size-base, 16px);
  font-weight: var(--font-weight-semibold, 600);
  line-height: var(--font-line-height-tight, 1.25);
  color: var(--foreground-primary);
  margin: 0;
  flex: 1;
}

/* ========================================
   Popover Body
   ======================================== */

.popover-body {
  padding: var(--spacing-4, 16px);
  font-size: var(--font-size-sm, 14px);
  line-height: var(--font-line-height-relaxed, 1.625);
  color: var(--foreground-secondary);
  max-height: 320px;
  overflow: auto;
}

/* ========================================
   Popover Footer
   ======================================== */

.popover-footer {
  padding: var(--spacing-4, 16px);
  border-top: 1px solid var(--border-default);
  display: flex;
  gap: var(--spacing-2, 8px);
  justify-content: flex-end;
}

/* ========================================
   Close Button
   ======================================== */

.popover-close {
  width: var(--spacing-6, 24px);
  height: var(--spacing-6, 24px);
  border: none;
  background: transparent;
  color: var(--foreground-tertiary);
  border-radius: var(--border-radius-sm, 4px);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: background-color 150ms ease, color 150ms ease;
}

.popover-close:hover {
  background: var(--background-secondary);
  color: var(--foreground-primary);
}

.popover-close:focus {
  outline: 2px solid var(--primary-default);
  outline-offset: 2px;
}

/* ========================================
   Trigger Button
   ======================================== */

.popover-trigger {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  display: inline-block;
}

/* ========================================
   Placement Variations
   ======================================== */

/* Top Left */
:host([placement="top-start"]) .popover-content {
  bottom: calc(100% + var(--spacing-2, 8px));
  left: 0;
}

:host([placement="top-start"]) .popover-arrow {
  bottom: calc(var(--spacing-1, 4px) * -1);
  left: var(--spacing-3, 12px);
  border-top: none;
  border-left: none;
}

/* Top Right */
:host([placement="top-end"]) .popover-content {
  bottom: calc(100% + var(--spacing-2, 8px));
  right: 0;
}

:host([placement="top-end"]) .popover-arrow {
  bottom: calc(var(--spacing-1, 4px) * -1);
  right: var(--spacing-3, 12px);
  border-top: none;
  border-left: none;
}

/* Bottom Left */
:host([placement="bottom-start"]) .popover-content {
  top: calc(100% + var(--spacing-2, 8px));
  left: 0;
}

:host([placement="bottom-start"]) .popover-arrow {
  top: calc(var(--spacing-1, 4px) * -1);
  left: var(--spacing-3, 12px);
  border-bottom: none;
  border-right: none;
}

/* Bottom Right */
:host([placement="bottom-end"]) .popover-content {
  top: calc(100% + var(--spacing-2, 8px));
  right: 0;
}

:host([placement="bottom-end"]) .popover-arrow {
  top: calc(var(--spacing-1, 4px) * -1);
  right: var(--spacing-3, 12px);
  border-bottom: none;
  border-right: none;
}

/* ========================================
   Focus Styles
   ======================================== */

.popover-content:focus {
  outline: none;
}

/* ========================================
   Responsive
   ======================================== */

@media (max-width: 640px) {
  .popover-content {
    max-width: calc(100vw - 32px);
  }

  :host([size="sm"]) .popover-content,
  :host([size="md"]) .popover-content,
  :host([size="lg"]) .popover-content,
  :host([size="small"]) .popover-content,
  :host([size="default"]) .popover-content,
  :host([size="large"]) .popover-content {
    width: auto;
    max-width: calc(100vw - 32px);
  }
}
