<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSS Optimization Demo - Hidearea Design</title>

  <!-- âŒ BAD: å…¨CSSã‚’èª­ã¿è¾¼ã¿ (188 KB) -->
  <!-- <link rel="stylesheet" href="../../packages/tokens/build/css/all.css"> -->

  <!-- âœ… GOOD: å¿…è¦ãªCSSã®ã¿èª­ã¿è¾¼ã¿ (~25 KB) -->
  <link rel="stylesheet" href="../../packages/tokens/build/css/variables.css">
  <link rel="stylesheet" href="../../packages/tokens/build/css/components/layout/button.css">
  <link rel="stylesheet" href="../../packages/tokens/build/css/components/forms/input.css">
  <link rel="stylesheet" href="../../packages/tokens/build/css/components/feedback/alert.css">

  <style>
    body {
      font-family: var(--font-family-base);
      padding: 2rem;
      background: var(--color-background);
      color: var(--color-text);
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    h1 {
      color: var(--color-primary);
      margin-bottom: 1rem;
    }

    .stats {
      background: var(--color-background-secondary);
      padding: 1rem;
      border-radius: var(--border-radius-md);
      margin-bottom: 2rem;
    }

    .stats h2 {
      margin-top: 0;
      font-size: 1.2rem;
    }

    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .comparison-item {
      padding: 1rem;
      border-radius: var(--border-radius-sm);
    }

    .bad {
      background: var(--color-error-light);
      border: 2px solid var(--color-error);
    }

    .good {
      background: var(--color-success-light);
      border: 2px solid var(--color-success);
    }

    .form-group {
      margin-bottom: 1rem;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }
  </style>

  <script type="module">
    // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å€‹åˆ¥ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
    import { HaButton } from '../../packages/core/dist/components/button/button.js';
    import { HaInput } from '../../packages/core/dist/components/input/input.js';
    import { HaAlert } from '../../packages/core/dist/components/alert/alert.js';

    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®çµ±è¨ˆã‚’è¡¨ç¤º
    window.addEventListener('load', () => {
      const perfData = performance.getEntriesByType('resource');
      const cssFiles = perfData.filter(r => r.name.endsWith('.css'));

      const totalSize = cssFiles.reduce((sum, file) => sum + (file.transferSize || 0), 0);

      document.getElementById('css-count').textContent = cssFiles.length;
      document.getElementById('css-size').textContent = (totalSize / 1024).toFixed(2) + ' KB';

      // å€‹åˆ¥ã®CSSãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±
      const fileList = document.getElementById('file-list');
      cssFiles.forEach(file => {
        const li = document.createElement('li');
        const fileName = file.name.split('/').pop();
        const size = ((file.transferSize || 0) / 1024).toFixed(2);
        li.textContent = `${fileName}: ${size} KB`;
        fileList.appendChild(li);
      });
    });

    // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã®ãƒ‡ãƒ¢
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('demo-form');
      const alert = document.querySelector('ha-alert');

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        alert.setAttribute('variant', 'success');
        alert.textContent = 'ãƒ•ã‚©ãƒ¼ãƒ ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸï¼';
        alert.style.display = 'block';

        setTimeout(() => {
          alert.style.display = 'none';
        }, 3000);
      });
    });
  </script>
</head>
<body>
  <div class="container">
    <h1>ğŸ¨ CSS æœ€é©åŒ–ãƒ‡ãƒ¢</h1>

    <div class="stats">
      <h2>ğŸ“Š èª­ã¿è¾¼ã¿çµ±è¨ˆ</h2>
      <p><strong>CSSãƒ•ã‚¡ã‚¤ãƒ«æ•°:</strong> <span id="css-count">-</span></p>
      <p><strong>åˆè¨ˆã‚µã‚¤ã‚º:</strong> <span id="css-size">-</span></p>
      <ul id="file-list"></ul>
    </div>

    <div class="comparison">
      <div class="comparison-item bad">
        <h3>âŒ å…¨CSSèª­ã¿è¾¼ã¿</h3>
        <p><strong>188 KB</strong></p>
        <p>ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«</p>
      </div>
      <div class="comparison-item good">
        <h3>âœ… Per-component CSS</h3>
        <p><strong>~25 KB</strong></p>
        <p>å¿…è¦ãªã‚¹ã‚¿ã‚¤ãƒ«ã®ã¿</p>
      </div>
    </div>

    <ha-alert variant="info" style="margin-bottom: 1.5rem;">
      ã“ã®ãƒšãƒ¼ã‚¸ã¯ <strong>per-component CSS imports</strong> ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
      <br>
      å‰Šæ¸›åŠ¹æœ: <strong>87% (188 KB â†’ 25 KB)</strong>
    </ha-alert>

    <h2>ãƒ‡ãƒ¢ãƒ•ã‚©ãƒ¼ãƒ </h2>
    <form id="demo-form">
      <div class="form-group">
        <label for="name">ãŠåå‰</label>
        <ha-input
          id="name"
          name="name"
          placeholder="å±±ç”°å¤ªéƒ"
          required>
        </ha-input>
      </div>

      <div class="form-group">
        <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
        <ha-input
          id="email"
          name="email"
          type="email"
          placeholder="example@email.com"
          required>
        </ha-input>
      </div>

      <ha-button type="submit" variant="primary">
        é€ä¿¡
      </ha-button>
    </form>

    <ha-alert variant="success" style="display: none; margin-top: 1rem;"></ha-alert>

    <div style="margin-top: 2rem; padding: 1rem; background: var(--color-background-secondary); border-radius: var(--border-radius-sm);">
      <h3>ğŸ’¡ ã“ã®ä¾‹ã§ä½¿ç”¨ã—ã¦ã„ã‚‹CSS</h3>
      <pre><code>&lt;link rel="stylesheet" href="variables.css"&gt;
&lt;link rel="stylesheet" href="components/layout/button.css"&gt;
&lt;link rel="stylesheet" href="components/forms/input.css"&gt;
&lt;link rel="stylesheet" href="components/feedback/alert.css"&gt;</code></pre>

      <p><strong>åˆè¨ˆ: ç´„25 KB</strong>ï¼ˆå¤‰æ•° + 3ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰</p>
    </div>
  </div>
</body>
</html>
